!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";var t,o,i,n="jelect";e[n]={version:"1.0.0",options:{classes:{autocomplete:n+"_type_autocomplete",containerActive:n+"_state_active",containerDisabled:n+"_state_disabled",currentActive:n+"-current_state_active",optionsActive:n+"-options_state_active",optionActive:n+"-option_state_active",optionDisabled:n+"-option_state_disabled",optionHide:n+"-option_state_hide"},plugins:[]},plugins:{},selectors:{container:".js-"+n,scroller:".js-"+n+"-scroller",input:".js-"+n+"-input",current:".js-"+n+"-current",options:".js-"+n+"-options",option:".js-"+n+"-option",optionValue:".js-"+n+"-option-value"},keyCode:{TAB:9,BACKSPACE:8,ENTER:13,ESC:27,DOWN:40,UP:38,HOME:36,END:35,PAGE_UP:33,PAGE_DOWN:34}},o=function(t){var o=this,i=e[n],s=i.selectors,l=i.options.classes,a=o.$jelectOptions.find(s.option+'[data-val="'+t+'"]'),r=a.find(s.optionValue).text();return a.hasClass(l.optionDisabled)?(console.error("Option {"+t+"} is disabled"),!1):(a.addClass(l.optionActive).siblings(s.option).removeClass(l.optionActive),o.$jelect.val(t).removeClass(l.containerActive).trigger("jelect.change"),o.autocomplete?o.$jelectCurrent.val(t):(o.$jelectCurrent.text(r).attr("data-val",t),o.$jelectInput.val(t).attr("value",t).trigger("change")),void o.trigger("change"))},i=function(){var t=this,o=e[n].selectors,i=[];return t.$jelectOptions.find(o.option).each(function(t,o){var n=e(o);i.push({index:t,value:n.data("val")})}),i},t=function(t,o){var i=e[n],s=i.selectors,l=i.options.classes,a={$jelect:t,$jelectCurrent:t.find(s.current),$jelectOptions:t.find(s.options),$jelectInput:t.find(s.input),autocomplete:t.hasClass(l.autocomplete),options:e.extend(!0,{},i.options,o||{})};e.extend(!0,this,a),this.init()},t.prototype.init=function(){var t=this,i=e[n],s=i.selectors,l=t.options.classes,a=t.$jelectOptions.find(s.option).not("."+l.optionDisabled).data("val");t.trigger("init"),t.values=t.serialize(),t.$jelect.val(a),t.$jelectCurrent.on("click "+n+".clickCurrent",function(){var o,i=e(s.container).filter("."+l.containerActive).not(t.$jelect),n=e(s.options).filter("."+l.optionsActive).not(t.$jelectOptions),a=t.$jelect.find(s.scroller),r=a.scrollTop(),c=t.$jelect.hasClass(l.containerDisabled),p=!t.$jelect.hasClass(l.containerActive)&&!t.$jelectOptions.hasClass(l.optionsActive);return c?!1:(p&&t.trigger("beforeOpen"),i.length&&n.length&&(i.removeClass(l.containerActive),n.removeClass(l.optionsActive)),t.$jelect.toggleClass(l.containerActive),t.$jelectOptions.toggleClass(l.optionsActive),t.$jelect.hasClass(l.containerActive)&&(o=t.$jelectOptions.find("."+l.optionActive),r=a.scrollTop(),a.scrollTop(r+o.position().top)),t.autocomplete&&t.$jelectCurrent.trigger("keyup"),void(p&&(t.$jelectCurrent.trigger("focus"),t.trigger("afterOpen"))))}),t.$jelectOptions.on("click "+n+".changeOption",s.option,function(){var i=e(this),n=i.data("val");return i.hasClass(l.optionDisabled)?!1:(o.call(t,n),void t.$jelectOptions.removeClass(l.optionsActive))}),t.autocomplete&&t.$jelectCurrent.on("keyup",function(o){var n=e(this),a=i.keyCode,r=o.keyCode,c=String.fromCharCode(r),p=/[a-zA-Zа-яА-ЯЁё0-9]/,v=n.val(),u=t.$jelectOptions.find(s.option),d=t.$jelect.find(s.scroller),f=e.grep(t.values,function(e){return-1===e.value.indexOf(v)});(p.test(c)||r===a.BACKSPACE)&&(t.$jelect.hasClass(l.containerActive)||t.$jelectCurrent.trigger("click"),u.removeClass(l.optionHide),e.each(f,function(e,t){var o=t.value;u.filter('[data-val="'+o+'"]').addClass(l.optionHide)}),u.filter(":visible").removeClass(l.optionActive).first().addClass(l.optionActive),d.scrollTop(0))})},t.prototype.trigger=function(t){var o=this;e.each(o.options.plugins||[],function(i,s){s=e[n].plugins[s],s&&s[t]&&s[t]({$jelect:o.$jelect,$jelectCurrent:o.$jelectCurrent,$jelectOptions:o.$jelectOptions,$jelectInput:o.$jelectInput,options:o.options,text:o.text(),val:o.val()})})},t.prototype.text=function(){return this.$jelectCurrent.text().trim()},t.prototype.val=function(){return this.$jelect.val()},t.prototype.setValue=function(e){return"undefined"!=typeof e&&o.call(this,e),this},t.prototype.addValue=function(t,o,i){var s=this,l=e[n],a=l.selectors,r=l.options.classes,c=s.$jelectOptions.find(a.option),p=c.length-1,v=null===i||void 0===i?p+1:i,u=null,d=null;v>c.length?v=p+1:0>v&&(v=0),u=0===v?c.first():v>0&&p>=v?c.eq(v):c.last(),d=u.clone(),d.removeClass(r.optionDisabled).removeClass(r.optionActive).removeClass(r.optionHide).attr("data-val",t).find(a.optionValue).html(o.trim()),p>=v?u.before(d):u.after(d),s.values.push({index:s.values.length,value:t})},t.prototype.serialize=function(){return i.call(this)},t.prototype.disable=function(t){var o=this,i=e[n],s=i.selectors,l=i.options.classes,a=o.$jelectOptions.find(s.option+'[data-val="'+t+'"]'),r=!a.hasClass(l.optionDisabled);if("undefined"!=typeof t){if(r&&(a.addClass(l.optionDisabled),o.$jelectCurrent.data("val")===t)){var c=o.$jelectOptions.find(s.option).not("."+l.optionDisabled).first();o.setValue(c.data("val"))}}else o.$jelect.addClass(l.containerDisabled),o.$jelectInput.attr("disabled",!0);return this},t.prototype.enable=function(t){var o=this,i=e[n],s=i.selectors,l=i.options.classes,a=o.$jelectOptions.find(s.option+'[data-val="'+t+'"]'),r=a.hasClass(l.optionDisabled);return"undefined"!=typeof t&&r?r&&(a=o.$jelectOptions.find(s.option+'[data-val="'+t+'"]'),a.removeClass(l.optionDisabled)):(o.$jelect.removeClass(l.containerDisabled),o.$jelectInput.attr("disabled",!1)),this},e(window.document).on("click "+n+".clickOutside",function(t){var o,i,s=e[n],l=s.selectors,a=e(t.target),r=e(l.options);if(!a.is(l.container)&&!a.closest(l.container).length){if(o=r.closest(l.container).data("jelect"),!o)return;i=o.options.classes,r.hasClass(i.optionsActive)&&(r.removeClass(i.optionsActive).closest(l.container).removeClass(i.containerActive),o.trigger("clickOutside"))}}).on("keydown "+n+".keydown",function(t){var i,s,l,a,r,c,p,v,u,d,f,C,h,j,g,$=e(t.target),A=e[n],b=A.keyCode,m=t.keyCode,y=A.selectors;if($.is(y.current)){switch(i=$.closest(y.container).data(n),s=i.options.classes,d=$.closest(y.container),f=d.find(y.scroller),C=d.find(y.options),r=C.outerHeight(),h=d.find(y.option).not("."+s.optionHide),j=h.filter("."+s.optionActive),c=d.hasClass(s.containerActive),l=f.scrollTop(),m){case b.TAB:d.removeClass(s.containerActive),C.removeClass(s.optionsActive),o.call(i,i.val());break;case b.ENTER:d.hasClass(s.containerActive)?j.trigger(n+".changeOption"):$.trigger("click"),t.preventDefault();break;case b.ESC:if(!c)return;$.trigger("click"),o.call(i,i.val()),t.preventDefault();break;case b.UP:if(t.preventDefault(),!c)return void $.trigger("click");var D=h.first().is(j);j.removeClass(s.optionActive),g=D?h.last():j.prevAll(":visible").not("."+s.optionDisabled).first(),a=g.position().top,0>a?l+=a:a>l+r&&(l=a);break;case b.DOWN:if(t.preventDefault(),!c)return void $.trigger("click");var O=h.last().is(j);j.removeClass(s.optionActive),g=O?h.first():j.nextAll(":visible").not("."+s.optionDisabled).first(),a=g.position().top,a>=r?l+=a:0>a&&(l=a);break;case b.HOME:if(t.preventDefault(),!c)return;if(j.is(h.first()))return;j.removeClass(s.optionActive),g=h.first(),l=g.position().top;break;case b.END:if(t.preventDefault(),!c)return;if(j.is(h.last()))return;j.removeClass(s.optionActive),g=h.last(),l=g.position().top;break;case b.PAGE_UP:if(t.preventDefault(),!c)return;p=Math.round(r/j.outerHeight()),v=Math.ceil((j.index()+1)/p)-1,u=v*p-p-1,j.removeClass(s.optionActive),0>u&&(u=0),g=0===u&&h.eq(u).hasClass(s.optionDisabled)?h.eq(u).nextAll(":visible").not("."+s.optionDisabled).first():h.eq(u),l+=g.position().top;break;case b.PAGE_DOWN:if(t.preventDefault(),!c)return;p=Math.round(r/j.outerHeight()),v=Math.ceil((j.index()+1)/p)+1,u=v*p-p,j.removeClass(s.optionActive),u>h.length&&(u=h.length-1),g=u===h.length-1?h.eq(u):h.eq(u).nextAll(":visible").not("."+s.optionDisabled).first(),l+=g.position().top}g&&(g.addClass(s.optionActive),f.scrollTop(l))}else $.is(y.option)&&(i=$.closest(y.container).data(n),s=i.options.classes,m===b.ENTER&&$.trigger(n+".changeOption"))}),e.fn[n]=function(o){var i=this,s=arguments;if(void 0===o||"object"==typeof o)return i.each(function(i,s){e.data(s,n)||e.data(s,n,new t(e(s),o))});if("string"==typeof o&&"_"!==o[0]&&"init"!==o){var l;return i.each(function(i,a){var r=e.data(a,n);r instanceof t&&"function"==typeof r[o]&&(l=r[o].apply(r,Array.prototype.slice.call(s,1))),"destroy"===o&&e.data(this,n,null)}),void 0!==l?l:i}}}),$(".jelect").jelect();var more="Show me more",less="Shoe me less",isMore=!0;$(".btn-collapse").on("click",function(){$(this).toggleClass("btn-collapse_in").find(".btn-collapse__text").text(isMore?less:more),isMore=!isMore});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJyZXF1aXJlIiwialF1ZXJ5IiwiJCIsIkplbGVjdCIsIl9zZXRWYWx1ZSIsIl9nZXRWYWx1ZXMiLCJwbHVnaW5OYW1lIiwidmVyc2lvbiIsIm9wdGlvbnMiLCJjbGFzc2VzIiwiYXV0b2NvbXBsZXRlIiwiY29udGFpbmVyQWN0aXZlIiwiY29udGFpbmVyRGlzYWJsZWQiLCJjdXJyZW50QWN0aXZlIiwib3B0aW9uc0FjdGl2ZSIsIm9wdGlvbkFjdGl2ZSIsIm9wdGlvbkRpc2FibGVkIiwib3B0aW9uSGlkZSIsInBsdWdpbnMiLCJzZWxlY3RvcnMiLCJjb250YWluZXIiLCJzY3JvbGxlciIsImlucHV0IiwiY3VycmVudCIsIm9wdGlvbiIsIm9wdGlvblZhbHVlIiwia2V5Q29kZSIsIlRBQiIsIkJBQ0tTUEFDRSIsIkVOVEVSIiwiRVNDIiwiRE9XTiIsIlVQIiwiSE9NRSIsIkVORCIsIlBBR0VfVVAiLCJQQUdFX0RPV04iLCJ2YWx1ZSIsIl90aGlzIiwidGhpcyIsImplbGVjdCIsIiRzZWxlY3RlZE9wdGlvbiIsIiRqZWxlY3RPcHRpb25zIiwiZmluZCIsImN1cnJlbnRUZXh0IiwidGV4dCIsImhhc0NsYXNzIiwiY29uc29sZSIsImVycm9yIiwiYWRkQ2xhc3MiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwiJGplbGVjdCIsInZhbCIsInRyaWdnZXIiLCIkamVsZWN0Q3VycmVudCIsImF0dHIiLCIkamVsZWN0SW5wdXQiLCJ2YWx1ZXMiLCJlYWNoIiwiaSIsIiRvcHRpb24iLCJwdXNoIiwiaW5kZXgiLCJkYXRhIiwiZGVmYXVsdHMiLCJleHRlbmQiLCJpbml0IiwicHJvdG90eXBlIiwiaW5pdFZhbCIsIm5vdCIsInNlcmlhbGl6ZSIsIm9uIiwiJGFjdGl2ZU9wdGlvbiIsIiRjb250YWluZXIiLCJmaWx0ZXIiLCIkb3B0aW9ucyIsIiRzY3JvbGxlciIsInNjcm9sbFZhbHVlIiwic2Nyb2xsVG9wIiwiaXNEaXNhYmxlZCIsImNhblJ1blRyaWdnZXIiLCJsZW5ndGgiLCJ0b2dnbGVDbGFzcyIsInBvc2l0aW9uIiwidG9wIiwiJHRoaXMiLCJjYWxsIiwiZXZlbnQiLCIkaW5wdXQiLCJldmVudEtleUNvZGUiLCJjaGFyIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwicGF0dGVybiIsImZpbHRlcmVkT3B0aW9ucyIsImdyZXAiLCJpbmRleE9mIiwidGVzdCIsImZpcnN0IiwicGx1Z2luIiwidHJpbSIsInNldFZhbHVlIiwiYWRkVmFsdWUiLCJ0aXRsZSIsImNvdW50T3B0aW9ucyIsInVuZGVmaW5lZCIsIiRuZXdPcHRpb24iLCJlcSIsImxhc3QiLCJjbG9uZSIsImh0bWwiLCJiZWZvcmUiLCJhZnRlciIsImRpc2FibGUiLCJpc0VuYWJsZWQiLCIkZmlyc3RFbmFibGVPcHRpb24iLCJlbmFibGUiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImplbGVjdERhdGEiLCIkdGFyZ2V0IiwidGFyZ2V0IiwiaXMiLCJjbG9zZXN0Iiwib3B0aW9uUG9zaXRpb24iLCJvcHRpb25zSGVpZ2h0IiwiaXNPcGVuIiwib3B0aW9uc0luUGFnZSIsInBhZ2UiLCJpbmRleE5leHRPcHRpb24iLCIkb3B0aW9uc0NvbnRhaW5lciIsIiRuZXh0T3B0aW9uIiwib3V0ZXJIZWlnaHQiLCJwcmV2ZW50RGVmYXVsdCIsImlzRmlyc3QiLCJwcmV2QWxsIiwiaXNMYXN0IiwibmV4dEFsbCIsIk1hdGgiLCJyb3VuZCIsImNlaWwiLCJmbiIsImFyZ3MiLCJhcmd1bWVudHMiLCJlbGVtZW50IiwicmV0dXJucyIsImluc3RhbmNlIiwiYXBwbHkiLCJBcnJheSIsInNsaWNlIiwibW9yZSIsImxlc3MiLCJpc01vcmUiXSwibWFwcGluZ3MiOiJDQUNDLFNBQVVBLEdBQ1ksa0JBQVhDLFNBQXlCQSxPQUFPQyxJQUMxQ0QsUUFBUSxVQUFXRCxHQUVuQkEsRUFENkIsZ0JBQVpHLFNBQ1RDLFFBQVEsVUFFUkMsU0FFUixTQUFV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c291cmNlc0NvbnRlbnQiOlsiLyohIGpxdWVyeS5qZWxlY3QuanMgdjEuMC4wIHwgZmVsaXhleHRlciB8IE1JVCBMaWNlbnNlIHwgaHR0cHM6Ly9naXRodWIuY29tL0NTU1NSL2plbGVjdC8gKi9cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuXHRcdGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xuXHR9IGVsc2Uge1xuXHRcdGZhY3RvcnkoalF1ZXJ5KTtcblx0fVxufShmdW5jdGlvbiAoJCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXJcblx0XHRKZWxlY3QsXG5cdFx0cGx1Z2luTmFtZSA9ICdqZWxlY3QnLFxuXHRcdF9zZXRWYWx1ZSxcblx0XHRfZ2V0VmFsdWVzO1xuXG5cdCRbcGx1Z2luTmFtZV0gPSB7XG5cdFx0dmVyc2lvbjogJzEuMC4wJyxcblx0XHRvcHRpb25zOiB7XG5cdFx0XHRjbGFzc2VzOiB7XG5cdFx0XHRcdGF1dG9jb21wbGV0ZTogcGx1Z2luTmFtZSArICdfdHlwZV9hdXRvY29tcGxldGUnLFxuXHRcdFx0XHRjb250YWluZXJBY3RpdmU6IHBsdWdpbk5hbWUgKyAnX3N0YXRlX2FjdGl2ZScsXG5cdFx0XHRcdGNvbnRhaW5lckRpc2FibGVkOiBwbHVnaW5OYW1lICsgJ19zdGF0ZV9kaXNhYmxlZCcsXG5cdFx0XHRcdGN1cnJlbnRBY3RpdmU6IHBsdWdpbk5hbWUgKyAnLWN1cnJlbnRfc3RhdGVfYWN0aXZlJyxcblx0XHRcdFx0b3B0aW9uc0FjdGl2ZTogcGx1Z2luTmFtZSArICctb3B0aW9uc19zdGF0ZV9hY3RpdmUnLFxuXHRcdFx0XHRvcHRpb25BY3RpdmU6IHBsdWdpbk5hbWUgKyAnLW9wdGlvbl9zdGF0ZV9hY3RpdmUnLFxuXHRcdFx0XHRvcHRpb25EaXNhYmxlZDogcGx1Z2luTmFtZSArICctb3B0aW9uX3N0YXRlX2Rpc2FibGVkJyxcblx0XHRcdFx0b3B0aW9uSGlkZTogcGx1Z2luTmFtZSArICctb3B0aW9uX3N0YXRlX2hpZGUnXG5cdFx0XHR9LFxuXHRcdFx0cGx1Z2luczogW11cblx0XHR9LFxuXHRcdHBsdWdpbnM6IHt9LFxuXHRcdHNlbGVjdG9yczoge1xuXHRcdFx0Y29udGFpbmVyOiAnLmpzLScgKyBwbHVnaW5OYW1lLFxuXHRcdFx0c2Nyb2xsZXI6ICcuanMtJyArIHBsdWdpbk5hbWUgKyAnLXNjcm9sbGVyJyxcblx0XHRcdGlucHV0OiAnLmpzLScgKyBwbHVnaW5OYW1lICsgJy1pbnB1dCcsXG5cdFx0XHRjdXJyZW50OiAnLmpzLScgKyBwbHVnaW5OYW1lICsgJy1jdXJyZW50Jyxcblx0XHRcdG9wdGlvbnM6ICcuanMtJyArIHBsdWdpbk5hbWUgKyAnLW9wdGlvbnMnLFxuXHRcdFx0b3B0aW9uOiAnLmpzLScgKyBwbHVnaW5OYW1lICsgJy1vcHRpb24nLFxuXHRcdFx0b3B0aW9uVmFsdWU6ICcuanMtJyArIHBsdWdpbk5hbWUgKyAnLW9wdGlvbi12YWx1ZSdcblx0XHR9LFxuXHRcdGtleUNvZGU6IHtcblx0XHRcdFRBQjogOSxcblx0XHRcdEJBQ0tTUEFDRTogOCxcblx0XHRcdEVOVEVSOiAxMyxcblx0XHRcdEVTQzogMjcsXG5cdFx0XHRET1dOOiA0MCxcblx0XHRcdFVQOiAzOCxcblx0XHRcdEhPTUU6IDM2LFxuXHRcdFx0RU5EOiAzNSxcblx0XHRcdFBBR0VfVVA6IDMzLFxuXHRcdFx0UEFHRV9ET1dOOiAzNFxuXHRcdH1cblx0fTtcblxuXHRfc2V0VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzLFxuXHRcdFx0amVsZWN0ID0gJFtwbHVnaW5OYW1lXSxcblx0XHRcdHNlbGVjdG9ycyA9IGplbGVjdC5zZWxlY3RvcnMsXG5cdFx0XHRjbGFzc2VzID0gamVsZWN0Lm9wdGlvbnMuY2xhc3Nlcyxcblx0XHRcdCRzZWxlY3RlZE9wdGlvbiA9IF90aGlzLiRqZWxlY3RPcHRpb25zLmZpbmQoc2VsZWN0b3JzLm9wdGlvbiArICdbZGF0YS12YWw9XCInICsgdmFsdWUgKyAnXCJdJyksXG5cdFx0XHRjdXJyZW50VGV4dCA9ICRzZWxlY3RlZE9wdGlvbi5maW5kKHNlbGVjdG9ycy5vcHRpb25WYWx1ZSkudGV4dCgpO1xuXG5cblx0XHRpZiAoJHNlbGVjdGVkT3B0aW9uLmhhc0NsYXNzKGNsYXNzZXMub3B0aW9uRGlzYWJsZWQpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdPcHRpb24geycgKyB2YWx1ZSArICd9IGlzIGRpc2FibGVkJyk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0JHNlbGVjdGVkT3B0aW9uXG5cdFx0XHQuYWRkQ2xhc3MoY2xhc3Nlcy5vcHRpb25BY3RpdmUpXG5cdFx0XHQuc2libGluZ3Moc2VsZWN0b3JzLm9wdGlvbilcblx0XHRcdC5yZW1vdmVDbGFzcyhjbGFzc2VzLm9wdGlvbkFjdGl2ZSk7XG5cblx0XHRfdGhpcy4kamVsZWN0XG5cdFx0XHQudmFsKHZhbHVlKVxuXHRcdFx0LnJlbW92ZUNsYXNzKGNsYXNzZXMuY29udGFpbmVyQWN0aXZlKVxuXHRcdFx0LnRyaWdnZXIoJ2plbGVjdC5jaGFuZ2UnKTtcblxuXG5cdFx0aWYgKF90aGlzLmF1dG9jb21wbGV0ZSkge1xuXHRcdFx0X3RoaXMuJGplbGVjdEN1cnJlbnQudmFsKHZhbHVlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU2V0IGEgY3VycmVudCB0ZXh0XG5cdFx0XHRfdGhpcy4kamVsZWN0Q3VycmVudFxuXHRcdFx0XHQudGV4dChjdXJyZW50VGV4dClcblx0XHRcdFx0LmF0dHIoJ2RhdGEtdmFsJywgdmFsdWUpO1xuXG5cdFx0XHQvLyBDaGFuZ2UgdGhlIHZhbHVlIG9mIGlucHV0IGFuZCBmaXJlIHRyaWdnZXIgYGNoYW5nZWBcblx0XHRcdF90aGlzLiRqZWxlY3RJbnB1dFxuXHRcdFx0XHQudmFsKHZhbHVlKVxuXHRcdFx0XHQuYXR0cigndmFsdWUnLCB2YWx1ZSlcblx0XHRcdFx0LnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdH1cblxuXHRcdF90aGlzLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHR9O1xuXG5cdF9nZXRWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHR2YXIgX3RoaXMgPSB0aGlzLFxuXHRcdFx0c2VsZWN0b3JzID0gJFtwbHVnaW5OYW1lXS5zZWxlY3RvcnMsXG5cdFx0XHR2YWx1ZXMgPSBbXTtcblxuXHRcdF90aGlzLiRqZWxlY3RPcHRpb25zXG5cdFx0XHQuZmluZChzZWxlY3RvcnMub3B0aW9uKVxuXHRcdFx0LmVhY2goZnVuY3Rpb24gKGksIG9wdGlvbikge1xuXG5cdFx0XHRcdHZhciAkb3B0aW9uID0gJChvcHRpb24pO1xuXG5cdFx0XHRcdHZhbHVlcy5wdXNoKHtcblx0XHRcdFx0XHRpbmRleDogaSxcblx0XHRcdFx0XHR2YWx1ZTogJG9wdGlvbi5kYXRhKCd2YWwnKVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0cmV0dXJuIHZhbHVlcztcblx0fTtcblxuXHRKZWxlY3QgPSBmdW5jdGlvbiAoJGplbGVjdCwgb3B0aW9ucykge1xuXG5cdFx0dmFyXG5cdFx0XHRkZWZhdWx0cyA9ICRbcGx1Z2luTmFtZV0sXG5cdFx0XHRzZWxlY3RvcnMgPSBkZWZhdWx0cy5zZWxlY3RvcnMsXG5cdFx0XHRjbGFzc2VzID0gZGVmYXVsdHMub3B0aW9ucy5jbGFzc2VzLFxuXHRcdFx0amVsZWN0ID0ge1xuXHRcdFx0XHQkamVsZWN0OiAkamVsZWN0LFxuXHRcdFx0XHQkamVsZWN0Q3VycmVudDogJGplbGVjdC5maW5kKHNlbGVjdG9ycy5jdXJyZW50KSxcblx0XHRcdFx0JGplbGVjdE9wdGlvbnM6ICRqZWxlY3QuZmluZChzZWxlY3RvcnMub3B0aW9ucyksXG5cdFx0XHRcdCRqZWxlY3RJbnB1dDogJGplbGVjdC5maW5kKHNlbGVjdG9ycy5pbnB1dCksXG5cdFx0XHRcdGF1dG9jb21wbGV0ZTogJGplbGVjdC5oYXNDbGFzcyhjbGFzc2VzLmF1dG9jb21wbGV0ZSksXG5cdFx0XHRcdG9wdGlvbnM6ICQuZXh0ZW5kKHRydWUsIHt9LCBkZWZhdWx0cy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KVxuXHRcdFx0fTtcblx0XHQkLmV4dGVuZCh0cnVlLCB0aGlzLCBqZWxlY3QpO1xuXG5cdFx0dGhpcy5pbml0KCk7XG5cdH07XG5cblx0SmVsZWN0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhclxuXHRcdFx0X3RoaXMgPSB0aGlzLFxuXHRcdFx0amVsZWN0ID0gJFtwbHVnaW5OYW1lXSxcblx0XHRcdHNlbGVjdG9ycyA9IGplbGVjdC5zZWxlY3RvcnMsXG5cdFx0XHRjbGFzc2VzID0gX3RoaXMub3B0aW9ucy5jbGFzc2VzLFxuXHRcdFx0aW5pdFZhbCA9IF90aGlzLiRqZWxlY3RPcHRpb25zLmZpbmQoc2VsZWN0b3JzLm9wdGlvbikubm90KCcuJyArIGNsYXNzZXMub3B0aW9uRGlzYWJsZWQpLmRhdGEoJ3ZhbCcpO1xuXG5cdFx0X3RoaXMudHJpZ2dlcignaW5pdCcpO1xuXG5cdFx0Ly8gc3RvcmUgZGF0YVxuXHRcdF90aGlzLnZhbHVlcyA9IF90aGlzLnNlcmlhbGl6ZSgpO1xuXG5cdFx0Ly8gU2V0IGluaXQgdmFsdWVcblx0XHRfdGhpcy4kamVsZWN0LnZhbChpbml0VmFsKTtcblxuXHRcdC8vIE9wZW4gYSBkcm9wZG93blxuXHRcdF90aGlzLiRqZWxlY3RDdXJyZW50Lm9uKCdjbGljayAnICsgcGx1Z2luTmFtZSArICcuY2xpY2tDdXJyZW50JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyXG5cdFx0XHRcdC8vIFNlbGVjdCBhbGwgYWN0aXZlIGNvbnRhaW5lcnMgd2l0aG91dCBjdXJyZW50XG5cdFx0XHRcdCRjb250YWluZXIgPSAkKHNlbGVjdG9ycy5jb250YWluZXIpLmZpbHRlcignLicgKyBjbGFzc2VzLmNvbnRhaW5lckFjdGl2ZSkubm90KF90aGlzLiRqZWxlY3QpLFxuXG5cdFx0XHRcdC8vIFNlbGVjdCBhbGwgYWN0aXZlIG9wdGlvbnMgY29udGFpbmVyIHdpdGhvdXQgY3VycmVudFxuXHRcdFx0XHQkb3B0aW9ucyA9ICQoc2VsZWN0b3JzLm9wdGlvbnMpLmZpbHRlcignLicgKyBjbGFzc2VzLm9wdGlvbnNBY3RpdmUpLm5vdChfdGhpcy4kamVsZWN0T3B0aW9ucyksXG5cblx0XHRcdFx0JHNjcm9sbGVyID0gX3RoaXMuJGplbGVjdC5maW5kKHNlbGVjdG9ycy5zY3JvbGxlciksXG5cblx0XHRcdFx0JGFjdGl2ZU9wdGlvbixcblxuXHRcdFx0XHRzY3JvbGxWYWx1ZSA9ICRzY3JvbGxlci5zY3JvbGxUb3AoKSxcblxuXHRcdFx0XHRpc0Rpc2FibGVkID0gX3RoaXMuJGplbGVjdC5oYXNDbGFzcyhjbGFzc2VzLmNvbnRhaW5lckRpc2FibGVkKSxcblxuXHRcdFx0XHRjYW5SdW5UcmlnZ2VyID0gKFxuXHRcdFx0XHRcdCFfdGhpcy4kamVsZWN0Lmhhc0NsYXNzKGNsYXNzZXMuY29udGFpbmVyQWN0aXZlKSAmJlxuXHRcdFx0XHRcdCFfdGhpcy4kamVsZWN0T3B0aW9ucy5oYXNDbGFzcyhjbGFzc2VzLm9wdGlvbnNBY3RpdmUpXG5cdFx0XHRcdCk7XG5cblx0XHRcdGlmIChpc0Rpc2FibGVkKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGNhblJ1blRyaWdnZXIpIHtcblx0XHRcdFx0X3RoaXMudHJpZ2dlcignYmVmb3JlT3BlbicpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDbG9zZSBhbGwgd2l0aG91dCBjdXJyZW50XG5cdFx0XHRpZiAoJGNvbnRhaW5lci5sZW5ndGggJiYgJG9wdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdCRjb250YWluZXIucmVtb3ZlQ2xhc3MoY2xhc3Nlcy5jb250YWluZXJBY3RpdmUpO1xuXHRcdFx0XHQkb3B0aW9ucy5yZW1vdmVDbGFzcyhjbGFzc2VzLm9wdGlvbnNBY3RpdmUpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPcGVuIG9yIGNsb3NlIGN1cnJlbnRcblx0XHRcdF90aGlzLiRqZWxlY3QudG9nZ2xlQ2xhc3MoY2xhc3Nlcy5jb250YWluZXJBY3RpdmUpO1xuXHRcdFx0X3RoaXMuJGplbGVjdE9wdGlvbnMudG9nZ2xlQ2xhc3MoY2xhc3Nlcy5vcHRpb25zQWN0aXZlKTtcblxuXHRcdFx0aWYgKF90aGlzLiRqZWxlY3QuaGFzQ2xhc3MoY2xhc3Nlcy5jb250YWluZXJBY3RpdmUpKSB7XG5cdFx0XHRcdCRhY3RpdmVPcHRpb24gPSBfdGhpcy4kamVsZWN0T3B0aW9ucy5maW5kKCcuJyArIGNsYXNzZXMub3B0aW9uQWN0aXZlKTtcblx0XHRcdFx0c2Nyb2xsVmFsdWUgPSAkc2Nyb2xsZXIuc2Nyb2xsVG9wKCk7XG5cdFx0XHRcdCRzY3JvbGxlci5zY3JvbGxUb3Aoc2Nyb2xsVmFsdWUgKyAkYWN0aXZlT3B0aW9uLnBvc2l0aW9uKCkudG9wKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKF90aGlzLmF1dG9jb21wbGV0ZSkge1xuXHRcdFx0XHRfdGhpcy4kamVsZWN0Q3VycmVudC50cmlnZ2VyKCdrZXl1cCcpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoY2FuUnVuVHJpZ2dlcikge1xuXHRcdFx0XHRfdGhpcy4kamVsZWN0Q3VycmVudC50cmlnZ2VyKCdmb2N1cycpO1xuXG5cdFx0XHRcdF90aGlzLnRyaWdnZXIoJ2FmdGVyT3BlbicpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gU2VsZWN0IGFuIG9wdGlvblxuXHRcdF90aGlzLiRqZWxlY3RPcHRpb25zLm9uKCdjbGljayAnICsgcGx1Z2luTmFtZSArICcuY2hhbmdlT3B0aW9uJywgc2VsZWN0b3JzLm9wdGlvbiwgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHR2YXIgJHRoaXMgPSAkKHRoaXMpLFxuXHRcdFx0XHR2YWx1ZSA9ICR0aGlzLmRhdGEoJ3ZhbCcpO1xuXG5cdFx0XHRpZiAoJHRoaXMuaGFzQ2xhc3MoY2xhc3Nlcy5vcHRpb25EaXNhYmxlZCkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRfc2V0VmFsdWUuY2FsbChfdGhpcywgdmFsdWUpO1xuXHRcdFx0X3RoaXMuJGplbGVjdE9wdGlvbnMucmVtb3ZlQ2xhc3MoY2xhc3Nlcy5vcHRpb25zQWN0aXZlKTtcblx0XHR9KTtcblxuXHRcdGlmIChfdGhpcy5hdXRvY29tcGxldGUpIHtcblx0XHRcdF90aGlzLiRqZWxlY3RDdXJyZW50Lm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChldmVudCkge1xuXG5cdFx0XHRcdHZhciAkaW5wdXQgPSAkKHRoaXMpLFxuXHRcdFx0XHRcdGtleUNvZGUgPSBqZWxlY3Qua2V5Q29kZSxcblx0XHRcdFx0XHRldmVudEtleUNvZGUgPSBldmVudC5rZXlDb2RlLFxuXHRcdFx0XHRcdGNoYXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGV2ZW50S2V5Q29kZSksXG5cdFx0XHRcdFx0cGF0dGVybiA9IC9bYS16QS1a0LAt0Y/QkC3Qr9CB0ZEwLTldLyxcblx0XHRcdFx0XHR2YWx1ZSA9ICRpbnB1dC52YWwoKSxcblx0XHRcdFx0XHQkb3B0aW9ucyA9IF90aGlzLiRqZWxlY3RPcHRpb25zLmZpbmQoc2VsZWN0b3JzLm9wdGlvbiksXG5cdFx0XHRcdFx0JHNjcm9sbGVyID0gX3RoaXMuJGplbGVjdC5maW5kKHNlbGVjdG9ycy5zY3JvbGxlciksXG5cdFx0XHRcdFx0ZmlsdGVyZWRPcHRpb25zID0gJC5ncmVwKF90aGlzLnZhbHVlcywgZnVuY3Rpb24gKG9wdGlvbikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG9wdGlvbi52YWx1ZS5pbmRleE9mKHZhbHVlKSA9PT0gLTE7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKCFwYXR0ZXJuLnRlc3QoY2hhcikgJiYgZXZlbnRLZXlDb2RlICE9PSBrZXlDb2RlLkJBQ0tTUEFDRSkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghX3RoaXMuJGplbGVjdC5oYXNDbGFzcyhjbGFzc2VzLmNvbnRhaW5lckFjdGl2ZSkpIHtcblx0XHRcdFx0XHRfdGhpcy4kamVsZWN0Q3VycmVudC50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JG9wdGlvbnMucmVtb3ZlQ2xhc3MoY2xhc3Nlcy5vcHRpb25IaWRlKTtcblxuXHRcdFx0XHQkLmVhY2goZmlsdGVyZWRPcHRpb25zLCBmdW5jdGlvbiAoaSwgb3B0aW9uKSB7XG5cdFx0XHRcdFx0dmFyIHZhbHVlID0gb3B0aW9uLnZhbHVlO1xuXHRcdFx0XHRcdCRvcHRpb25zXG5cdFx0XHRcdFx0XHQuZmlsdGVyKCdbZGF0YS12YWw9XCInICsgdmFsdWUgKyAnXCJdJylcblx0XHRcdFx0XHRcdC5hZGRDbGFzcyhjbGFzc2VzLm9wdGlvbkhpZGUpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQkb3B0aW9uc1xuXHRcdFx0XHRcdC5maWx0ZXIoJzp2aXNpYmxlJylcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoY2xhc3Nlcy5vcHRpb25BY3RpdmUpXG5cdFx0XHRcdFx0LmZpcnN0KClcblx0XHRcdFx0XHQuYWRkQ2xhc3MoY2xhc3Nlcy5vcHRpb25BY3RpdmUpO1xuXG5cdFx0XHRcdCRzY3JvbGxlci5zY3JvbGxUb3AoMCk7XG5cblx0XHRcdH0pO1xuXHRcdH1cblxuXHR9O1xuXG5cdEplbGVjdC5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uICh0cmlnZ2VyKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdCQuZWFjaChfdGhpcy5vcHRpb25zLnBsdWdpbnMgfHwgW10sIGZ1bmN0aW9uIChpLCBwbHVnaW4pIHtcblx0XHRcdHBsdWdpbiA9ICRbcGx1Z2luTmFtZV0ucGx1Z2luc1twbHVnaW5dO1xuXG5cdFx0XHRpZiAocGx1Z2luICYmIHBsdWdpblt0cmlnZ2VyXSkge1xuXHRcdFx0XHRwbHVnaW5bdHJpZ2dlcl0oe1xuXHRcdFx0XHRcdCRqZWxlY3Q6IF90aGlzLiRqZWxlY3QsXG5cdFx0XHRcdFx0JGplbGVjdEN1cnJlbnQ6IF90aGlzLiRqZWxlY3RDdXJyZW50LFxuXHRcdFx0XHRcdCRqZWxlY3RPcHRpb25zOiBfdGhpcy4kamVsZWN0T3B0aW9ucyxcblx0XHRcdFx0XHQkamVsZWN0SW5wdXQ6IF90aGlzLiRqZWxlY3RJbnB1dCxcblx0XHRcdFx0XHRvcHRpb25zOiBfdGhpcy5vcHRpb25zLFxuXHRcdFx0XHRcdHRleHQ6IF90aGlzLnRleHQoKSxcblx0XHRcdFx0XHR2YWw6IF90aGlzLnZhbCgpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdEplbGVjdC5wcm90b3R5cGUudGV4dCA9IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy4kamVsZWN0Q3VycmVudC50ZXh0KCkudHJpbSgpO1xuXHR9O1xuXG5cdEplbGVjdC5wcm90b3R5cGUudmFsID0gZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiB0aGlzLiRqZWxlY3QudmFsKCk7XG5cdH07XG5cblx0SmVsZWN0LnByb3RvdHlwZS5zZXRWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRfc2V0VmFsdWUuY2FsbCh0aGlzLCB2YWx1ZSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdEplbGVjdC5wcm90b3R5cGUuYWRkVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIHRpdGxlLCBpbmRleCkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXMsXG5cdFx0XHRqZWxlY3QgPSAkW3BsdWdpbk5hbWVdLFxuXHRcdFx0c2VsZWN0b3JzID0gamVsZWN0LnNlbGVjdG9ycyxcblx0XHRcdGNsYXNzZXMgPSBqZWxlY3Qub3B0aW9ucy5jbGFzc2VzLFxuXHRcdFx0JG9wdGlvbnMgPSBfdGhpcy4kamVsZWN0T3B0aW9ucy5maW5kKHNlbGVjdG9ycy5vcHRpb24pLFxuXHRcdFx0Y291bnRPcHRpb25zID0gJG9wdGlvbnMubGVuZ3RoIC0gMSxcblx0XHRcdHBvc2l0aW9uID0gKGluZGV4ID09PSBudWxsIHx8IGluZGV4ID09PSB1bmRlZmluZWQpID8gY291bnRPcHRpb25zICsgMSA6IGluZGV4LFxuXHRcdFx0JG9wdGlvbiA9IG51bGwsXG5cdFx0XHQkbmV3T3B0aW9uID0gbnVsbDtcblxuXHRcdGlmIChwb3NpdGlvbiA+ICRvcHRpb25zLmxlbmd0aCkge1xuXHRcdFx0cG9zaXRpb24gPSBjb3VudE9wdGlvbnMgKyAxXG5cdFx0fSBlbHNlIGlmIChwb3NpdGlvbiA8IDApIHtcblx0XHRcdHBvc2l0aW9uID0gMDtcblx0XHR9XG5cdFx0aWYgKHBvc2l0aW9uID09PSAwKSB7XG5cdFx0XHQkb3B0aW9uID0gJG9wdGlvbnMuZmlyc3QoKTtcblx0XHR9IGVsc2UgaWYgKHBvc2l0aW9uID4gMCAmJiBwb3NpdGlvbiA8PSBjb3VudE9wdGlvbnMpIHtcblx0XHRcdCRvcHRpb24gPSAkb3B0aW9ucy5lcShwb3NpdGlvbik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRvcHRpb24gPSAkb3B0aW9ucy5sYXN0KCk7XG5cdFx0fVxuXG5cdFx0JG5ld09wdGlvbiA9ICRvcHRpb24uY2xvbmUoKTtcblxuXHRcdCRuZXdPcHRpb25cblx0XHRcdC5yZW1vdmVDbGFzcyhjbGFzc2VzLm9wdGlvbkRpc2FibGVkKVxuXHRcdFx0LnJlbW92ZUNsYXNzKGNsYXNzZXMub3B0aW9uQWN0aXZlKVxuXHRcdFx0LnJlbW92ZUNsYXNzKGNsYXNzZXMub3B0aW9uSGlkZSlcblx0XHRcdC5hdHRyKCdkYXRhLXZhbCcsIHZhbHVlKVxuXHRcdFx0LmZpbmQoc2VsZWN0b3JzLm9wdGlvblZhbHVlKVxuXHRcdFx0Lmh0bWwodGl0bGUudHJpbSgpKTtcblxuXHRcdGlmIChwb3NpdGlvbiA8PSBjb3VudE9wdGlvbnMpIHtcblx0XHRcdCRvcHRpb24uYmVmb3JlKCRuZXdPcHRpb24pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkb3B0aW9uLmFmdGVyKCRuZXdPcHRpb24pO1xuXHRcdH1cblxuXHRcdF90aGlzLnZhbHVlcy5wdXNoKHtcblx0XHRcdGluZGV4OiBfdGhpcy52YWx1ZXMubGVuZ3RoLFxuXHRcdFx0dmFsdWU6IHZhbHVlXG5cdFx0fSk7XG5cblx0fVxuXG5cdEplbGVjdC5wcm90b3R5cGUuc2VyaWFsaXplID0gZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiBfZ2V0VmFsdWVzLmNhbGwodGhpcyk7XG5cdH07XG5cblx0SmVsZWN0LnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcyxcblx0XHRcdGplbGVjdCA9ICRbcGx1Z2luTmFtZV0sXG5cdFx0XHRzZWxlY3RvcnMgPSBqZWxlY3Quc2VsZWN0b3JzLFxuXHRcdFx0Y2xhc3NlcyA9IGplbGVjdC5vcHRpb25zLmNsYXNzZXMsXG5cdFx0XHQkb3B0aW9uID0gX3RoaXMuJGplbGVjdE9wdGlvbnNcblx0XHRcdFx0XHRcdC5maW5kKHNlbGVjdG9ycy5vcHRpb24gKyAnW2RhdGEtdmFsPVwiJyArIHZhbHVlICsgJ1wiXScpLFxuXHRcdFx0aXNFbmFibGVkID0gISRvcHRpb24uaGFzQ2xhc3MoY2xhc3Nlcy5vcHRpb25EaXNhYmxlZCk7XG5cblx0XHRpZiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0aWYgKGlzRW5hYmxlZCkge1xuXHRcdFx0XHQkb3B0aW9uLmFkZENsYXNzKGNsYXNzZXMub3B0aW9uRGlzYWJsZWQpO1xuXHRcdFx0XHQvLyBpZiBsb2NrYWJsZSBvcHRpb25zIGlzIHNlbGVjdGVkXG5cdFx0XHRcdC8vIHRoZW4gc2VsZWN0IG9mIHRoZSBmaXJzdCB1bmxvY2tlZCBvcHRpb25cblx0XHRcdFx0aWYgKF90aGlzLiRqZWxlY3RDdXJyZW50LmRhdGEoJ3ZhbCcpID09PSB2YWx1ZSkge1xuXHRcdFx0XHRcdHZhciAkZmlyc3RFbmFibGVPcHRpb24gPSBfdGhpcy4kamVsZWN0T3B0aW9uc1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0LmZpbmQoc2VsZWN0b3JzLm9wdGlvbilcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5ub3QoJy4nICsgY2xhc3Nlcy5vcHRpb25EaXNhYmxlZClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5maXJzdCgpO1xuXHRcdFx0XHRcdF90aGlzLnNldFZhbHVlKCRmaXJzdEVuYWJsZU9wdGlvbi5kYXRhKCd2YWwnKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0X3RoaXMuJGplbGVjdC5hZGRDbGFzcyhjbGFzc2VzLmNvbnRhaW5lckRpc2FibGVkKTtcblx0XHRcdF90aGlzLiRqZWxlY3RJbnB1dC5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHRKZWxlY3QucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXMsXG5cdFx0XHRqZWxlY3QgPSAkW3BsdWdpbk5hbWVdLFxuXHRcdFx0c2VsZWN0b3JzID0gamVsZWN0LnNlbGVjdG9ycyxcblx0XHRcdGNsYXNzZXMgPSBqZWxlY3Qub3B0aW9ucy5jbGFzc2VzLFxuXHRcdFx0JG9wdGlvbiA9IF90aGlzLiRqZWxlY3RPcHRpb25zXG5cdFx0XHRcdFx0XHQuZmluZChzZWxlY3RvcnMub3B0aW9uICsgJ1tkYXRhLXZhbD1cIicgKyB2YWx1ZSArICdcIl0nKSxcblx0XHRcdGlzRGlzYWJsZWQgPSAkb3B0aW9uLmhhc0NsYXNzKGNsYXNzZXMub3B0aW9uRGlzYWJsZWQpO1xuXG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNEaXNhYmxlZCkge1xuXHRcdFx0aWYgKGlzRGlzYWJsZWQpIHtcblx0XHRcdFx0JG9wdGlvbiA9IF90aGlzLiRqZWxlY3RPcHRpb25zXG5cdFx0XHRcdFx0XHRcdC5maW5kKHNlbGVjdG9ycy5vcHRpb24gKyAnW2RhdGEtdmFsPVwiJyArIHZhbHVlICsgJ1wiXScpLFxuXHRcdFx0XHQkb3B0aW9uLnJlbW92ZUNsYXNzKGNsYXNzZXMub3B0aW9uRGlzYWJsZWQpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRfdGhpcy4kamVsZWN0LnJlbW92ZUNsYXNzKGNsYXNzZXMuY29udGFpbmVyRGlzYWJsZWQpO1xuXHRcdFx0X3RoaXMuJGplbGVjdElucHV0LmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHQvLyBIaWRlIGRyb3Bkb3ducyB3aGVuIGNsaWNrIG91dHNpZGVcblx0JCh3aW5kb3cuZG9jdW1lbnQpXG5cdFx0Lm9uKCdjbGljayAnICsgcGx1Z2luTmFtZSArICcuY2xpY2tPdXRzaWRlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHR2YXJcblx0XHRcdFx0amVsZWN0ID0gJFtwbHVnaW5OYW1lXSxcblx0XHRcdFx0c2VsZWN0b3JzID0gamVsZWN0LnNlbGVjdG9ycyxcblx0XHRcdFx0amVsZWN0RGF0YSxcblx0XHRcdFx0Y2xhc3Nlcyxcblx0XHRcdFx0JHRhcmdldCA9ICQoZXZlbnQudGFyZ2V0KSxcblx0XHRcdFx0JG9wdGlvbnMgPSAkKHNlbGVjdG9ycy5vcHRpb25zKTtcblxuXHRcdFx0aWYgKFxuXHRcdFx0XHQhJHRhcmdldC5pcyhzZWxlY3RvcnMuY29udGFpbmVyKSAmJlxuXHRcdFx0XHQhJHRhcmdldC5jbG9zZXN0KHNlbGVjdG9ycy5jb250YWluZXIpLmxlbmd0aFxuXHRcdFx0KSB7XG5cdFx0XHRcdGplbGVjdERhdGEgPSAkb3B0aW9ucy5jbG9zZXN0KHNlbGVjdG9ycy5jb250YWluZXIpLmRhdGEoJ2plbGVjdCcpO1xuXG5cdFx0XHRcdGlmICghamVsZWN0RGF0YSkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNsYXNzZXMgPSBqZWxlY3REYXRhLm9wdGlvbnMuY2xhc3NlcztcblxuXHRcdFx0XHRpZiAoJG9wdGlvbnMuaGFzQ2xhc3MoY2xhc3Nlcy5vcHRpb25zQWN0aXZlKSkge1xuXHRcdFx0XHRcdCRvcHRpb25zXG5cdFx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoY2xhc3Nlcy5vcHRpb25zQWN0aXZlKVxuXHRcdFx0XHRcdFx0LmNsb3Nlc3Qoc2VsZWN0b3JzLmNvbnRhaW5lcilcblx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyhjbGFzc2VzLmNvbnRhaW5lckFjdGl2ZSk7XG5cblx0XHRcdFx0XHRqZWxlY3REYXRhLnRyaWdnZXIoJ2NsaWNrT3V0c2lkZScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSlcblx0XHQub24oJ2tleWRvd24gJyArIHBsdWdpbk5hbWUgKyAnLmtleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdHZhclxuXHRcdFx0XHQkdGFyZ2V0ID0gJChldmVudC50YXJnZXQpLFxuXHRcdFx0XHRqZWxlY3QgPSAkW3BsdWdpbk5hbWVdLFxuXHRcdFx0XHRrZXlDb2RlID0gamVsZWN0LmtleUNvZGUsXG5cdFx0XHRcdGV2ZW50S2V5Q29kZSA9IGV2ZW50LmtleUNvZGUsXG5cdFx0XHRcdHNlbGVjdG9ycyA9IGplbGVjdC5zZWxlY3RvcnMsXG5cdFx0XHRcdGplbGVjdERhdGEsXG5cdFx0XHRcdGNsYXNzZXMsXG5cdFx0XHRcdHNjcm9sbFRvcCxcblx0XHRcdFx0b3B0aW9uUG9zaXRpb24sXG5cdFx0XHRcdG9wdGlvbnNIZWlnaHQsXG5cdFx0XHRcdGlzT3Blbixcblx0XHRcdFx0b3B0aW9uc0luUGFnZSxcblx0XHRcdFx0cGFnZSxcblx0XHRcdFx0aW5kZXhOZXh0T3B0aW9uLFxuXHRcdFx0XHQkamVsZWN0LFxuXHRcdFx0XHQkc2Nyb2xsZXIsXG5cdFx0XHRcdCRvcHRpb25zQ29udGFpbmVyLFxuXHRcdFx0XHQkb3B0aW9ucyxcblx0XHRcdFx0JGFjdGl2ZU9wdGlvbixcblx0XHRcdFx0JG5leHRPcHRpb247XG5cblx0XHRcdGlmICgkdGFyZ2V0LmlzKHNlbGVjdG9ycy5jdXJyZW50KSkge1xuXHRcdFx0XHRqZWxlY3REYXRhID0gJHRhcmdldC5jbG9zZXN0KHNlbGVjdG9ycy5jb250YWluZXIpLmRhdGEocGx1Z2luTmFtZSk7XG5cdFx0XHRcdGNsYXNzZXMgPSBqZWxlY3REYXRhLm9wdGlvbnMuY2xhc3Nlcztcblx0XHRcdFx0JGplbGVjdCA9ICR0YXJnZXQuY2xvc2VzdChzZWxlY3RvcnMuY29udGFpbmVyKTtcblx0XHRcdFx0JHNjcm9sbGVyID0gJGplbGVjdC5maW5kKHNlbGVjdG9ycy5zY3JvbGxlcik7XG5cdFx0XHRcdCRvcHRpb25zQ29udGFpbmVyID0gJGplbGVjdC5maW5kKHNlbGVjdG9ycy5vcHRpb25zKTtcblx0XHRcdFx0b3B0aW9uc0hlaWdodCA9ICRvcHRpb25zQ29udGFpbmVyLm91dGVySGVpZ2h0KCk7XG5cdFx0XHRcdCRvcHRpb25zID0gJGplbGVjdC5maW5kKHNlbGVjdG9ycy5vcHRpb24pLm5vdCgnLicgKyBjbGFzc2VzLm9wdGlvbkhpZGUpO1xuXHRcdFx0XHQkYWN0aXZlT3B0aW9uID0gJG9wdGlvbnMuZmlsdGVyKCcuJyArIGNsYXNzZXMub3B0aW9uQWN0aXZlKTtcblxuXHRcdFx0XHRpc09wZW4gPSAkamVsZWN0Lmhhc0NsYXNzKGNsYXNzZXMuY29udGFpbmVyQWN0aXZlKTtcblxuXHRcdFx0XHRzY3JvbGxUb3AgPSAkc2Nyb2xsZXIuc2Nyb2xsVG9wKCk7XG5cblx0XHRcdFx0c3dpdGNoIChldmVudEtleUNvZGUpIHtcblxuXHRcdFx0XHRcdGNhc2Uga2V5Q29kZS5UQUI6IHtcblxuXHRcdFx0XHRcdFx0JGplbGVjdC5yZW1vdmVDbGFzcyhjbGFzc2VzLmNvbnRhaW5lckFjdGl2ZSk7XG5cdFx0XHRcdFx0XHQkb3B0aW9uc0NvbnRhaW5lci5yZW1vdmVDbGFzcyhjbGFzc2VzLm9wdGlvbnNBY3RpdmUpO1xuXG5cdFx0XHRcdFx0XHRfc2V0VmFsdWUuY2FsbChqZWxlY3REYXRhLCBqZWxlY3REYXRhLnZhbCgpKTtcblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBrZXlDb2RlLkVOVEVSOiB7XG5cblx0XHRcdFx0XHRcdGlmICgkamVsZWN0Lmhhc0NsYXNzKGNsYXNzZXMuY29udGFpbmVyQWN0aXZlKSkge1xuXHRcdFx0XHRcdFx0XHQkYWN0aXZlT3B0aW9uLnRyaWdnZXIocGx1Z2luTmFtZSArICcuY2hhbmdlT3B0aW9uJyk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQkdGFyZ2V0LnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2Uga2V5Q29kZS5FU0M6IHtcblxuXHRcdFx0XHRcdFx0aWYgKCFpc09wZW4pIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQkdGFyZ2V0LnRyaWdnZXIoJ2NsaWNrJyk7XG5cblx0XHRcdFx0XHRcdF9zZXRWYWx1ZS5jYWxsKGplbGVjdERhdGEsIGplbGVjdERhdGEudmFsKCkpO1xuXG5cdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIGtleUNvZGUuVVA6IHtcblxuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHRcdFx0aWYgKCFpc09wZW4pIHtcblx0XHRcdFx0XHRcdFx0JHRhcmdldC50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHZhciBpc0ZpcnN0ID0gJG9wdGlvbnMuZmlyc3QoKS5pcygkYWN0aXZlT3B0aW9uKTtcblxuXHRcdFx0XHRcdFx0JGFjdGl2ZU9wdGlvbi5yZW1vdmVDbGFzcyhjbGFzc2VzLm9wdGlvbkFjdGl2ZSk7XG5cblx0XHRcdFx0XHRcdGlmICghaXNGaXJzdCkge1xuXHRcdFx0XHRcdFx0XHQkbmV4dE9wdGlvbiA9ICRhY3RpdmVPcHRpb24ucHJldkFsbCgnOnZpc2libGUnKS5ub3QoJy4nICsgY2xhc3Nlcy5vcHRpb25EaXNhYmxlZCkuZmlyc3QoKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCRuZXh0T3B0aW9uID0gJG9wdGlvbnMubGFzdCgpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRvcHRpb25Qb3NpdGlvbiA9ICRuZXh0T3B0aW9uLnBvc2l0aW9uKCkudG9wO1xuXG5cdFx0XHRcdFx0XHRpZiAob3B0aW9uUG9zaXRpb24gPCAwKSB7XG5cdFx0XHRcdFx0XHRcdHNjcm9sbFRvcCArPSBvcHRpb25Qb3NpdGlvbjtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAob3B0aW9uUG9zaXRpb24gPiBzY3JvbGxUb3AgKyBvcHRpb25zSGVpZ2h0KSB7XG5cdFx0XHRcdFx0XHRcdHNjcm9sbFRvcCA9IG9wdGlvblBvc2l0aW9uO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIGtleUNvZGUuRE9XTjoge1xuXG5cdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdFx0XHRpZiAoIWlzT3Blbikge1xuXHRcdFx0XHRcdFx0XHQkdGFyZ2V0LnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIGlzTGFzdCA9ICRvcHRpb25zLmxhc3QoKS5pcygkYWN0aXZlT3B0aW9uKTtcblxuXHRcdFx0XHRcdFx0JGFjdGl2ZU9wdGlvbi5yZW1vdmVDbGFzcyhjbGFzc2VzLm9wdGlvbkFjdGl2ZSk7XG5cblx0XHRcdFx0XHRcdGlmICghaXNMYXN0KSB7XG5cdFx0XHRcdFx0XHRcdCRuZXh0T3B0aW9uID0gJGFjdGl2ZU9wdGlvbi5uZXh0QWxsKCc6dmlzaWJsZScpLm5vdCgnLicgKyBjbGFzc2VzLm9wdGlvbkRpc2FibGVkKS5maXJzdCgpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0JG5leHRPcHRpb24gPSAkb3B0aW9ucy5maXJzdCgpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRvcHRpb25Qb3NpdGlvbiA9ICRuZXh0T3B0aW9uLnBvc2l0aW9uKCkudG9wO1xuXG5cdFx0XHRcdFx0XHRpZiAob3B0aW9uUG9zaXRpb24gPj0gb3B0aW9uc0hlaWdodCkge1xuXHRcdFx0XHRcdFx0XHRzY3JvbGxUb3AgKz0gb3B0aW9uUG9zaXRpb247XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG9wdGlvblBvc2l0aW9uIDwgMCkge1xuXHRcdFx0XHRcdFx0XHRzY3JvbGxUb3AgPSBvcHRpb25Qb3NpdGlvbjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBrZXlDb2RlLkhPTUU6IHtcblxuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHRcdFx0aWYgKCFpc09wZW4pIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoJGFjdGl2ZU9wdGlvbi5pcygkb3B0aW9ucy5maXJzdCgpKSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdCRhY3RpdmVPcHRpb24ucmVtb3ZlQ2xhc3MoY2xhc3Nlcy5vcHRpb25BY3RpdmUpO1xuXG5cdFx0XHRcdFx0XHQkbmV4dE9wdGlvbiA9ICRvcHRpb25zLmZpcnN0KCk7XG5cblx0XHRcdFx0XHRcdHNjcm9sbFRvcCA9ICRuZXh0T3B0aW9uLnBvc2l0aW9uKCkudG9wO1xuXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIGtleUNvZGUuRU5EOiB7XG5cblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0XHRcdGlmICghaXNPcGVuKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKCRhY3RpdmVPcHRpb24uaXMoJG9wdGlvbnMubGFzdCgpKSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdCRhY3RpdmVPcHRpb24ucmVtb3ZlQ2xhc3MoY2xhc3Nlcy5vcHRpb25BY3RpdmUpO1xuXG5cdFx0XHRcdFx0XHQkbmV4dE9wdGlvbiA9ICRvcHRpb25zLmxhc3QoKTtcblxuXHRcdFx0XHRcdFx0c2Nyb2xsVG9wID0gJG5leHRPcHRpb24ucG9zaXRpb24oKS50b3A7XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2Uga2V5Q29kZS5QQUdFX1VQOiB7XG5cblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0XHRcdGlmICghaXNPcGVuKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0b3B0aW9uc0luUGFnZSA9IE1hdGgucm91bmQob3B0aW9uc0hlaWdodCAvICRhY3RpdmVPcHRpb24ub3V0ZXJIZWlnaHQoKSk7XG5cdFx0XHRcdFx0XHRwYWdlID0gTWF0aC5jZWlsKCgkYWN0aXZlT3B0aW9uLmluZGV4KCkgKyAxKSAvIG9wdGlvbnNJblBhZ2UpIC0gMTtcblx0XHRcdFx0XHRcdGluZGV4TmV4dE9wdGlvbiA9IHBhZ2UgKiBvcHRpb25zSW5QYWdlIC0gb3B0aW9uc0luUGFnZSAtIDE7XG5cblx0XHRcdFx0XHRcdCRhY3RpdmVPcHRpb24ucmVtb3ZlQ2xhc3MoY2xhc3Nlcy5vcHRpb25BY3RpdmUpO1xuXG5cdFx0XHRcdFx0XHRpZiAoaW5kZXhOZXh0T3B0aW9uIDwgMCkge1xuXHRcdFx0XHRcdFx0XHRpbmRleE5leHRPcHRpb24gPSAwO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHRpbmRleE5leHRPcHRpb24gPT09IDAgJiZcblx0XHRcdFx0XHRcdFx0JG9wdGlvbnMuZXEoaW5kZXhOZXh0T3B0aW9uKS5oYXNDbGFzcyhjbGFzc2VzLm9wdGlvbkRpc2FibGVkKVxuXHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdCRuZXh0T3B0aW9uID0gJG9wdGlvbnNcblx0XHRcdFx0XHRcdFx0XHQuZXEoaW5kZXhOZXh0T3B0aW9uKVxuXHRcdFx0XHRcdFx0XHRcdC5uZXh0QWxsKCc6dmlzaWJsZScpXG5cdFx0XHRcdFx0XHRcdFx0Lm5vdCgnLicgKyBjbGFzc2VzLm9wdGlvbkRpc2FibGVkKVxuXHRcdFx0XHRcdFx0XHRcdC5maXJzdCgpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0JG5leHRPcHRpb24gPSAkb3B0aW9ucy5lcShpbmRleE5leHRPcHRpb24pO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRzY3JvbGxUb3AgKz0gJG5leHRPcHRpb24ucG9zaXRpb24oKS50b3A7XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2Uga2V5Q29kZS5QQUdFX0RPV046IHtcblxuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHRcdFx0aWYgKCFpc09wZW4pIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRvcHRpb25zSW5QYWdlID0gTWF0aC5yb3VuZChvcHRpb25zSGVpZ2h0IC8gJGFjdGl2ZU9wdGlvbi5vdXRlckhlaWdodCgpKTtcblx0XHRcdFx0XHRcdHBhZ2UgPSBNYXRoLmNlaWwoKCRhY3RpdmVPcHRpb24uaW5kZXgoKSArIDEpIC8gb3B0aW9uc0luUGFnZSkgKyAxO1xuXHRcdFx0XHRcdFx0aW5kZXhOZXh0T3B0aW9uID0gcGFnZSAqIG9wdGlvbnNJblBhZ2UgLSBvcHRpb25zSW5QYWdlO1xuXG5cdFx0XHRcdFx0XHQkYWN0aXZlT3B0aW9uLnJlbW92ZUNsYXNzKGNsYXNzZXMub3B0aW9uQWN0aXZlKTtcblxuXHRcdFx0XHRcdFx0aWYgKGluZGV4TmV4dE9wdGlvbiA+ICRvcHRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRpbmRleE5leHRPcHRpb24gPSAkb3B0aW9ucy5sZW5ndGggLSAxO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoaW5kZXhOZXh0T3B0aW9uID09PSAkb3B0aW9ucy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0XHRcdCRuZXh0T3B0aW9uID0gJG9wdGlvbnMuZXEoaW5kZXhOZXh0T3B0aW9uKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCRuZXh0T3B0aW9uID0gJG9wdGlvbnNcblx0XHRcdFx0XHRcdFx0XHQuZXEoaW5kZXhOZXh0T3B0aW9uKVxuXHRcdFx0XHRcdFx0XHRcdC5uZXh0QWxsKCc6dmlzaWJsZScpXG5cdFx0XHRcdFx0XHRcdFx0Lm5vdCgnLicgKyBjbGFzc2VzLm9wdGlvbkRpc2FibGVkKVxuXHRcdFx0XHRcdFx0XHRcdC5maXJzdCgpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRzY3JvbGxUb3AgKz0gJG5leHRPcHRpb24ucG9zaXRpb24oKS50b3A7XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICgkbmV4dE9wdGlvbikge1xuXHRcdFx0XHRcdCRuZXh0T3B0aW9uLmFkZENsYXNzKGNsYXNzZXMub3B0aW9uQWN0aXZlKTtcblx0XHRcdFx0XHQkc2Nyb2xsZXIuc2Nyb2xsVG9wKHNjcm9sbFRvcCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIGlmICgkdGFyZ2V0LmlzKHNlbGVjdG9ycy5vcHRpb24pKSB7XG5cdFx0XHRcdGplbGVjdERhdGEgPSAkdGFyZ2V0LmNsb3Nlc3Qoc2VsZWN0b3JzLmNvbnRhaW5lcikuZGF0YShwbHVnaW5OYW1lKTtcblx0XHRcdFx0Y2xhc3NlcyA9IGplbGVjdERhdGEub3B0aW9ucy5jbGFzc2VzO1xuXG5cdFx0XHRcdGlmIChldmVudEtleUNvZGUgPT09IGtleUNvZGUuRU5URVIpIHtcblx0XHRcdFx0XHQkdGFyZ2V0LnRyaWdnZXIocGx1Z2luTmFtZSArICcuY2hhbmdlT3B0aW9uJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHQkLmZuW3BsdWdpbk5hbWVdID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0XHR2YXJcblx0XHRcdF90aGlzID0gdGhpcyxcblx0XHRcdGFyZ3MgPSBhcmd1bWVudHM7XG5cblx0XHQvLyBJcyB0aGUgZmlyc3QgcGFyYW1ldGVyIGFuIG9iamVjdCAob3B0aW9ucyksIG9yIHdhcyBvbWl0dGVkLFxuXHRcdC8vIGluc3RhbnRpYXRlIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBwbHVnaW4uXG5cdFx0aWYgKG9wdGlvbnMgPT09IHVuZGVmaW5lZCB8fCB0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcpIHtcblx0XHRcdHJldHVybiBfdGhpcy5lYWNoKGZ1bmN0aW9uIChpLCBlbGVtZW50KSB7XG5cblx0XHRcdFx0Ly8gT25seSBhbGxvdyB0aGUgcGx1Z2luIHRvIGJlIGluc3RhbnRpYXRlZCBvbmNlLFxuXHRcdFx0XHQvLyBzbyB3ZSBjaGVjayB0aGF0IHRoZSBlbGVtZW50IGhhcyBubyBwbHVnaW4gaW5zdGFudGlhdGlvbiB5ZXRcblx0XHRcdFx0aWYgKCEkLmRhdGEoZWxlbWVudCwgcGx1Z2luTmFtZSkpIHtcblxuXHRcdFx0XHRcdC8vIGlmIGl0IGhhcyBubyBpbnN0YW5jZSwgY3JlYXRlIGEgbmV3IG9uZSxcblx0XHRcdFx0XHQvLyBwYXNzIG9wdGlvbnMgdG8gb3VyIHBsdWdpbiBjb25zdHJ1Y3Rvcixcblx0XHRcdFx0XHQvLyBhbmQgc3RvcmUgdGhlIHBsdWdpbiBpbnN0YW5jZVxuXHRcdFx0XHRcdC8vIGluIHRoZSBlbGVtZW50cyBqUXVlcnkgZGF0YSBvYmplY3QuXG5cdFx0XHRcdFx0JC5kYXRhKGVsZW1lbnQsIHBsdWdpbk5hbWUsIG5ldyBKZWxlY3QoJChlbGVtZW50KSwgb3B0aW9ucykpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdC8vIElmIHRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgYSBzdHJpbmcgYW5kIGl0IGRvZXNuJ3Qgc3RhcnRcblx0XHQvLyB3aXRoIGFuIHVuZGVyc2NvcmUgb3IgXCJjb250YWluc1wiIHRoZSBgaW5pdGAtZnVuY3Rpb24sXG5cdFx0Ly8gdHJlYXQgdGhpcyBhcyBhIGNhbGwgdG8gYSBwdWJsaWMgbWV0aG9kLlxuXHRcdH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnICYmIG9wdGlvbnNbMF0gIT09ICdfJyAmJiBvcHRpb25zICE9PSAnaW5pdCcpIHtcblxuXHRcdFx0Ly8gQ2FjaGUgdGhlIG1ldGhvZCBjYWxsXG5cdFx0XHQvLyB0byBtYWtlIGl0IHBvc3NpYmxlXG5cdFx0XHQvLyB0byByZXR1cm4gYSB2YWx1ZVxuXHRcdFx0dmFyIHJldHVybnM7XG5cblx0XHRcdF90aGlzLmVhY2goZnVuY3Rpb24gKGksIGVsZW1lbnQpIHtcblx0XHRcdFx0dmFyIGluc3RhbmNlID0gJC5kYXRhKGVsZW1lbnQsIHBsdWdpbk5hbWUpO1xuXG5cdFx0XHRcdC8vIFRlc3RzIHRoYXQgdGhlcmUncyBhbHJlYWR5IGEgcGx1Z2luLWluc3RhbmNlXG5cdFx0XHRcdC8vIGFuZCBjaGVja3MgdGhhdCB0aGUgcmVxdWVzdGVkIHB1YmxpYyBtZXRob2QgZXhpc3RzXG5cdFx0XHRcdGlmIChpbnN0YW5jZSBpbnN0YW5jZW9mIEplbGVjdCAmJiB0eXBlb2YgaW5zdGFuY2Vbb3B0aW9uc10gPT09ICdmdW5jdGlvbicpIHtcblxuXHRcdFx0XHRcdC8vIENhbGwgdGhlIG1ldGhvZCBvZiBvdXIgcGx1Z2luIGluc3RhbmNlLFxuXHRcdFx0XHRcdC8vIGFuZCBwYXNzIGl0IHRoZSBzdXBwbGllZCBhcmd1bWVudHMuXG5cdFx0XHRcdFx0cmV0dXJucyA9IGluc3RhbmNlW29wdGlvbnNdLmFwcGx5KGluc3RhbmNlLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzLCAxKSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBbGxvdyBpbnN0YW5jZXMgdG8gYmUgZGVzdHJveWVkIHZpYSB0aGUgJ2Rlc3Ryb3knIG1ldGhvZFxuXHRcdFx0XHRpZiAob3B0aW9ucyA9PT0gJ2Rlc3Ryb3knKSB7XG5cdFx0XHRcdFx0JC5kYXRhKHRoaXMsIHBsdWdpbk5hbWUsIG51bGwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gSWYgdGhlIGVhcmxpZXIgY2FjaGVkIG1ldGhvZFxuXHRcdFx0Ly8gZ2l2ZXMgYSB2YWx1ZSBiYWNrIHJldHVybiB0aGUgdmFsdWUsXG5cdFx0XHQvLyBvdGhlcndpc2UgcmV0dXJuIHRoaXMgdG8gcHJlc2VydmUgY2hhaW5hYmlsaXR5LlxuXHRcdFx0cmV0dXJuIHJldHVybnMgIT09IHVuZGVmaW5lZCA/IHJldHVybnMgOiBfdGhpcztcblx0XHR9XG5cdH07XG5cbn0pKTtcblxuJCgnLmplbGVjdCcpLmplbGVjdCgpO1xuXG52YXIgbW9yZSA9ICdTaG93IG1lIG1vcmUnLFxuICAgIGxlc3MgPSAnU2hvZSBtZSBsZXNzJ1xudmFyIGlzTW9yZSA9IHRydWU7XG4kKCcuYnRuLWNvbGxhcHNlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYnRuLWNvbGxhcHNlX2luJylcbiAgICAgICAgLmZpbmQoJy5idG4tY29sbGFwc2VfX3RleHQnKVxuICAgICAgICAudGV4dChpc01vcmUgPyBsZXNzIDogbW9yZSk7XG4gICAgaXNNb3JlID0gIWlzTW9yZTtcbn0pIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
